<h2 class="layout__header">{{selectedTraining.name}}</h2>
<div class="workout">
  <div class="workout__box layout__box">
    @if(!endTraining){
    <div class="workout__name">
      {{selectedTraining.exercises[currentExerciseIndex].name}}
    </div>
    <div
      class="workout__time"
      [class]="{'workout__time--stop': timeLeft === 0, 'workout__time--last': timeLeft <= 15}"
    >
      Koniec przerwy za: <span>{{timeLeft}} sek.</span>
    </div>
    @if(!selectedTraining.exercises[currentExerciseIndex].isBreak){
    <div class="workout__info">
      <div class="workout__weight">
        Ciężar: <span>{{currentRep.weight}} kg.</span>
      </div>
      <div class="workout__weight">
        Powtórzenia: <span>{{currentRep.repsCount}}</span>
      </div>
    </div>
    <div class="workout__reps">
      @for (set of selectedTraining.exercises[currentExerciseIndex].sets; track
      set; let i = $index) {
      <div
        class="workout__rep"
        [class]="{'workout__rep--done': set.done, 'workout__rep--current': currentRepIndex===i}"
      >
        {{i + 1}}
      </div>
      }
    </div>
    }
    <div class="input-field input-field--textarea" [class.filled]="comment">
      <label for="comment" class="input-field__label">Komentarz</label>
      <textarea
        id="comment"
        class="input-field__input"
        style="resize: none"
        [(ngModel)]="comment"
        rows="4"
        cols="50"
      ></textarea>
    </div>
    }@else {
    <div class="workout__name">Trening zakończony</div>
    <div class="workout__time">{{endTrainingTime}}</div>
    }
  </div>
</div>
<div class="workout__btns button mt-1">
  @if (!endTraining) {
  <button
    class="workout__btn workout__btn--warning button__control button__control--warning"
    (click)="backToList()"
  >
    Zakończ trening <i class="fa-solid fa-x"></i>
  </button>

  @if (currentExerciseIndex !== 0 || currentRepIndex !== 0) {
  <button class="workout__btn button__control" (click)="back()">
    <i class="fa-solid fa-arrow-left"></i> Wstecz
  </button>
  } @else {
  <button class="workout__btn button__control" (click)="backToList()">
    <i class="fa-solid fa-arrow-left"></i> Powrót
  </button>
  } @if ( currentExerciseIndex !== selectedTraining.exercises.length - 1 ||
  currentRepIndex !==
  selectedTraining.exercises[currentExerciseIndex].sets.length - 1 ) {
  <button class="workout__btn button__control" (click)="next()">
    Następne <i class="fa-solid fa-arrow-right"></i>
  </button>
  } @else {
  <button
    class="workout__btn button__control button__control--success"
    (click)="hanldeEndTraining()"
  >
    Zakończ trening <i class="fa-solid fa-check"></i>
  </button>
  } } @else {
  <button class="workout__btn button__control" (click)="backToList()">
    <i class="fa-solid fa-arrow-left"></i> Powrót do listy ćwiczeń
  </button>
  }
</div>
<app-training-details
  [selectedTraining]="selectedTraining"
  [stepsView]="true"
></app-training-details>
